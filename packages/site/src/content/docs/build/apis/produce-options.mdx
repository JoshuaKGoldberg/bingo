---
title: produceOptions
---

Given a [Template](/build/concepts/templates) and any existing options, loads inferred values for any remaining options.

`produceOptions` takes in up to two argument:

1. _(required)_ A template
2. _(optional)_ A settings object containing any properties from a [Template Context](/build/details/contexts#template-context)

It returns a Promise for the resultant options for the template.

For example, given this template that declares an optional `value` option that defaults to `"default"`, `produceOptions` can be run to generate its options object:

```ts
import { createTemplate, produceOptions } from "create";
import { z } from "zod";

const template = createTemplate({
	options: {
		value: z.string().optional(),
	},
	prepare() {
		return {
			value: "default",
		};
	},
	produce() {
		// ...
	},
});

// { value: "default" }
await produceOptions(template);
```

:::tip
If the Template does not define a `prepare()`, then `settings.options` will be returned directly.
:::

## Settings

### `offline`

Whether to hint to the template not to make network requests.

This is equivalent to the [`--offline` CLI flag](/cli#--offline).
If provided, [Input Context `fetchers`](/build/details/contexts#input-fetchers) will reject with an Error instead of resolving.

For example, this template is told to run offline:

```ts
import { createTemplate, produceOptions, take } from "create";
import { inputFromFetch } from "input-from-fetch";
import { z } from "zod";

const template = createTemplate({
	options: {
		fact: z.string().optional(),
	},
	prepare({ take }) {
		return {
			fact: async () =>
				await take(inputFromFetch, {
					resource: "https://catfact.ninja/fact",
				}),
		};
	},
	produce() {
		// ...
	},
});

// { fact: "Cats can jump up to 7 times their tail length." }
await produceOptions(template);

// { fact: undefined }
await produceOptions(template, {
	offline: true,
});
```

:::tip
:::

:::caution
Inputs that rely on a `fetcher` should by convention return `undefined` if `offline` is specified.
However, nothing prevents them from manually sending a network request with `fetch()` or other APIs.
If you are finding your input or template still sends requests offline, file a bug on the template.
:::

### `options`

Any number of options defined by the template's [`options` schema](/build/apis/create-template#options).

Providing `options` in the settings object prevents any default values defined in `prepare()` from being used.

For example, the following template declares an optional `value` option that defaults to `"default"`.
Passing in a `value` prevents that default value from being used:

```ts
import { createTemplate, produceOptions } from "create";
import { z } from "zod";

const template = createTemplate({
	options: {
		value: z.string().optional(),
	},
	prepare() {
		return {
			value: "default",
		};
	},
	produce() {
		// ...
	},
});

// { value: "override" }
await produceOptions(template, {
	options: {
		value: "override",
	},
});
```
